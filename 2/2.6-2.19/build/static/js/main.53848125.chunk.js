(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),s=n(15),u=n(11),l=n(12),c=n(14),m=n(13),f=n(16),d=function(e){var t=e.person,n=e.del;return r.a.createElement("div",null,r.a.createElement("p",null,t.name,"    ",t.number," ",r.a.createElement("button",{onClick:n}," Poista ",t.id," ")))},p=n(2),h=n.n(p),v="/api/persons",w={getAll:function(){return h.a.get(v)},create:function(e){return h.a.post(v,e)},del:function(e){return h.a.delete("".concat(v,"/").concat(e))},update:function(e,t){return h.a.put("".concat(v,"/").concat(e),t)}},N=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleNewName=function(e){n.setState({newName:e.target.value})},n.handleNewNumber=function(e){n.setState({newNumber:e.target.value})},n.handleFilter=function(e){n.setState({filter:e.target.value})},n.addPerson=function(e){e.preventDefault();var t=n.state.persons.find(function(e){if(e.name===n.state.newName)return e});if(void 0===t){var a={name:n.state.newName,number:n.state.newNumber};w.create(a).then(function(e){n.setState({persons:n.state.persons.concat(e.data),notification:"Lis\xe4tty ".concat(n.state.newName)})})}else if(window.confirm(n.state.newName+" on jo listassa, haluatko p\xe4ivitt\xe4\xe4 numeron?")){var r=Object(s.a)({},t,{number:n.state.newNumber});w.update(t.id,r).then(function(e){n.setState({persons:n.state.persons.map(function(n){return n.id!==t.id?n:e.data}),notification:"Muutettu ".concat(t.name," numeroa")})})}},n.del=function(e){return function(){window.confirm("Olet poistamassa "+n.state.persons[parseInt(e)-1].name)&&w.del(e).then(function(t){w.getAll().then(function(t){n.setState({persons:t.data,notification:"Poistettu ".concat(n.state.persons[parseInt(e)-1].name)})})}).catch(function(t){n.setState({error:"Henkil\xf6 '".concat(n.state.persons[parseInt(e)-1].name,"' on jo valitettavasti poistettu palvelimelta"),persons:n.state.persons.filter(function(t){return t.id!==e})}),setTimeout(function(){n.setState({error:null})},5e3)})}},n.state={persons:[],newName:"",newNumber:"",filter:"",notification:null,error:null},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.getAll().then(function(t){e.setState({persons:t.data})})}},{key:"render",value:function(){var e=this,t=this.state.persons.filter(function(t){return t.name.includes(e.state.filter)});return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(b,{message:this.state.notification}),r.a.createElement(E,{message:this.state.error}),r.a.createElement("div",null,"Rajaa nimia:",r.a.createElement("input",{value:this.state.filter,onChange:this.handleFilter})),r.a.createElement("form",{onSubmit:this.addPerson},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:this.state.newName,onChange:this.handleNewName})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:this.state.newNumber,onChange:this.handleNewNumber})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),r.a.createElement("h2",null,"Numerot"),t.map(function(t){return r.a.createElement(d,{key:t.name,person:t,del:e.del(t.id)})}))}}]),t}(r.a.Component),b=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"notification"},t)},E=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)},g=N;n(41);o.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.53848125.chunk.js.map